<?xml version="1.0" encoding="UTF-8"?>

<plugin
	id="com.blocks.BDocuments"
	label="Documents"
	version="1.0.0"
	info="Blocks Documents">

	<requirement bundle="com.blocks.Blocks" version="1.0.0" />
	<requirement bundle="com.blocks.BLifecycle" version="1.0.0" />
	<requirement bundle="com.blocks.BUserInterface" version="1.0.0" />

	<extension-point id="documentControllerDelegate" label="Document Controller Delegate" />
	<extension-point id="documentDefaultWindowControllersFactory" label="Document Default Window Controlers Factory" />

	<extension point="com.blocks.BLifecycle.lifecycle">
		<applicationLaunching class="BDocumentController sharedInstance" />
		<applicationDidFinishLaunching class="BDocumentController sharedInstance" />
		<applicationMayTerminateNotification class="BDocumentController sharedInstance" />
		<applicationCancledTerminateNotification class="BDocumentController sharedInstance" />
		<applicationWillTerminate class="BDocumentController sharedInstance" />
	</extension>

	<extension point="com.blocks.BLifecycle.lifecycle">
		<applicationDidFinishLaunching class="BDocumentCloudDelegate sharedInstance" />
	</extension>
	
	<extension point="com.blocks.BUserInterface.menus" processOrder="2">		
		<menu id="com.blocks.BUserInterface.menus.main">
			<menuitem title="%Sync" id="cloudDocumentsService" submenu="com.blocks.BUserInterface.menus.main.cloudDocumentsService" location="after:window" />
		</menu>
		
		<menu id="com.blocks.BUserInterface.menus.main.file">
			<menuitem title="%Show Unsaved Changes..." id="showUnsavedChanges" location="group:closeGroup" action="showUnsavedChanges:" />
		</menu>
		
		<menu id="com.blocks.BUserInterface.menus.main.cloudDocumentsService">
			<menuitem title="CloudServiceLabel" id="browseCloudDocumentsOnline" action="browseCloudDocumentsOnline:" target="BDocumentCloudDelegate sharedInstance" />
			<menuitem title="%Sync" id="syncSharedDocuments" action="beginSync:" target="BDocumentCloudDelegate sharedInstance" indentationLevel="1" keyEquivalent="s" keyEquivalentModifierMask="NSControlKeyMask|NSCommandKeyMask" />
			<menuitem title="%New Document" id="newCloudDocument" action="newCloudDocument:" target="BDocumentCloudDelegate sharedInstance" indentationLevel="1" />
			<menuitem title="%Delete Document" id="deleteCloudDocument" action="deleteCloudDocument:" target="BDocumentCloudDelegate sharedInstance" indentationLevel="1" />
			<menuitem title="%Sign In..." id="toggleDocumentsServiceAuthentication" action="toggleDocumentsServiceAuthentication:" target="BDocumentCloudDelegate sharedInstance" indentationLevel="1" />
		</menu>
	</extension>	
</plugin>